# RFXcom
RFXcom has created a few transceivers for use in the 433 [Mhz] RF band. As the name implies, a transceiver can both send and receive packets. Moreover, the RFXcom transceivers support multiple protocols, making it a perfect device to control multiple devices of multiple brands. Some domotica controllers, like domoticz, therefore also have a driver to access the RFXcom transceiver to acquire data and send commands using multiple protocols to multiple types of devices. However, even in these cases, only a single program has access, via a serial USB connection, to the transceiver itself.

Python script mqtt.rfxcom.py offers is a multiplexer, which accepts commands via MQTT and sends the response back via MQTT. The many-to-one and the one-to-many facilities of MQTT are used to offer independent and simultanous access from multiple programs to the RFXcom transceiver. Moreover, the programs using the transceiver no langer need to run on the machine to which the transceiver is physically connected. Thus it becomes possible to have a program which receives and analyses the unsolicited responses received by the RFXcom transceiver to run on some machine in your (local) network while at the same time another program, on possibly another computer, is controlling the lights.

# Acces
As multiple programs can access the transceiver, there must be some way to send the response back to the originator of the command. In version 0.10 of script mqtt.rfxcom.py, the method choosen is to prepend an identifier to the command, which is stripped before the command is send to the transceiver. Upon receipt of the response, the identifier is prepended to the response.

The typical flow of events for a source of commands is to subscribe to topic 'rfxcom/response', send a command, including it's identifier, to topic 'rfxcom/command' and wait for a response. If a response comes in with another identifier, it will be silently ignored. If a response comes in with the correct identifier, the identifier is stripped and the response is acted upon. (This method looks like Ethernet: a packet with a destination address matching the address of the network interface is accepted, a packet with another (unicast) destination address is silently ignored.)
